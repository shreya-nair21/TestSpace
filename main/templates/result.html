{% extends 'base.html' %}
{% block content %}

<div class="container mt-5">
  <div class="card shadow-lg border-0 mb-4">
    <div class="card-header bg-primary text-white text-center py-4">
      <h2 class="mb-0">Exam Results</h2>
    </div>
    <div class="card-body p-4">
      <!-- Score Section -->
      <div class="row text-center mb-4">
        <div class="col-md-4">
          <div class="card bg-light border-0 h-100">
            <div class="card-body">
              <h5 class="text-muted">Score</h5>
              <h3 class="fw-bold">{{ result.score }} / {{ total_questions }}</h3>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card bg-light border-0 h-100">
            <div class="card-body">
              <h5 class="text-muted">Percentage</h5>
              <h3 class="fw-bold {% if percentage >= 50 %}text-success{% else %}text-danger{% endif %}">{{ percentage}} %</h3>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card bg-light border-0 h-100">
            <div class="card-body">
              <h5 class="text-muted">Time Taken</h5>
              <h3 class="fw-bold">{{ result.time_taken }}s</h3>
            </div>
          </div>
        </div>
      </div>

      <hr>

      <h4 class="mb-3">Detailed Review</h4>
      <div class="list-group">
        {% for item in review %}
        <div
          class="list-group-item list-group-item-action flex-column align-items-start bg-opacity-10 {% if item.is_correct %}list-group-item-success{% else %}list-group-item-danger{% endif %}">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">Q{{ forloop.counter }}: {{ item.question }}</h5>
            <small>{% if item.is_correct %}<span class="badge bg-success">Correct</span>{% else %}<span
                class="badge bg-danger">Incorrect</span>{% endif %}</small>
          </div>
          <p class="mb-1">
            <strong>Your Answer:</strong> {{ item.chosen_answer }} <br>
            <strong>Correct Answer:</strong> {{ item.correct_answer }}
          </p>
        </div>
        {% endfor %}
      </div>
    </div>
    <div class="card-footer text-center bg-white border-0 py-3">
      <a href="/" class="btn btn-primary btn-lg">Back to Home</a>
    </div>
  </div>
</div>

{% endblock %}